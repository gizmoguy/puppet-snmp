<%= ERB.new(File.read(File.expand_path("_header.erb",File.dirname(file)))).result(binding) -%>

################################################################################
# AGENT BEHAVIOUR

<% if (@agentaddress.is_a?(Array)) and (@agentaddress.count > 0) -%>
agentAddress <%= @agentaddress.join(',') %>
<% end -%>

################################################################################
# ACCESS CONTROL

#       name          incl/excl  subtree             mask(optional)
<% @views.each do |view| -%>
view    <%= view %>
<% end -%>

rocommunity <%= @ro_community %> localhost
rocommunity <%= @ro_community %> <%= @ro_network %>
rouser authOnlyUser
iquerySecName internalUser
rouser internalUser
<% if @rw_community -%>
rwcommunity <%= @rw_community %> <%= @rw_network %>
rwuser authPrivUser priv
<% end -%>
rocommunity <%= @ro_community %> default -V systemonly

################################################################################
# SYSTEM INFORMATION

# ------------------------------------------------------------------------------
# System Group
sysLocation <%= @location %>
sysContact <%= @contact %>
sysServices <%= @services %>

################################################################################
# EXTENDING AGENT FUNCTIONALITY

<% if @dlmod.any? -%>
# ------------------------------------------------------------------------------
# Dynamically Loadable Modules
<% @dlmod.each do |mod| -%>
dlmod <%= mod %>
<% end -%>

<% end -%>
################################################################################
# OTHER CONFIGURATION

<% @snmpd_config.each do |line| -%>
<%= line %>
<% end -%>
